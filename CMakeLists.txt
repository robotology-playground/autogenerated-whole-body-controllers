cmake_minimum_required(VERSION 3.5)
project(autogenerated-whole-body-controllers)

set(CMAKE_CXX_STANDARD 14)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include(GNUInstallDirs)

# Control where binaries and libraries are placed in the build folder
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/${CMAKE_INSTALL_BINDIR}")
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/${CMAKE_INSTALL_LIBDIR}")
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/${CMAKE_INSTALL_LIBDIR}")

find_package(BlockFactory COMPONENTS Core SimulinkCoder REQUIRED)
find_package(WBToolbox 5)

include(TargetFromGeneratedCode)

find_package(Matlab COMPONENTS
    MX_LIBRARY
    ENG_LIBRARY
    MAIN_PROGRAM
    # SIMULINK # From CMake > 3.7
)

if(NOT ${Matlab_FOUND})
    find_package(SimulinkCoderRuntime REQUIRED)
    set(Matlab_ROOT_DIR ${SimulinkCoderRuntime_ROOT_DIR})
endif()

add_subdirectory(autogenerated)
